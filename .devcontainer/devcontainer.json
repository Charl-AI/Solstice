{
    "name": "Solstice Development container (CPU only)",
    "build": {
        "dockerfile": "Dockerfile",
        "context": ".."
    },
    "settings": {
        // This is the venv path set in the Dockerfile
        "python.defaultInterpreterPath": "/opt/venv/bin/python",
        "python.languageServer": "Pylance",
        "python.analysis.typeCheckingMode": "basic",
        "python.formatting.provider": "black",
        "python.formatting.blackArgs": [
            "--experimental-string-processing"
        ],
        "editor.formatOnSave": true
    },
    "extensions": [
        "ms-python.python",
        "ms-python.vscode-pylance",
        "ms-python.black-formatter",
        "github.copilot",
        "github.vscode-pull-request-github",
        "njpwerner.autodocstring"
    ],
    "features": {
        "github-cli": "latest"
    },
    // prepend the venv to $PATH, removing the need for source /opt/venv/bin/activate
    "remoteEnv": {
        "PATH": "/opt/venv/bin:${containerEnv:PATH}"
    },
    "containerUser": "vscode",
    // install dependencies, including solstice in 'editable' mode
    "postCreateCommand": "poetry install",
    "shutdownAction": "none" // don't stop container on exit
}
